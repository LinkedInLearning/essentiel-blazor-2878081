@inherits LayoutComponentBase

@using Microsoft.AspNetCore.WebUtilities

@inject NavigationManager nav
@inject IConfiguration conf
@inject ILoggerFactory logFactory

<CascadingValue Value="styles">
    <NavMenu />

    @Body
</CascadingValue>

@code {
    public string[] styles = { "???" };

    private ILogger log;

    protected override void OnInitialized()
    {
        log = logFactory.CreateLogger<MainLayout>();
        styles = conf.GetValue<string>("Const:Styles")?.Split(',') ?? styles;

        log.LogInformation("Initialisation");

        if (QueryHelpers.ParseQuery(new Uri(nav.Uri).Query).TryGetValue("lang", out var paramLang))
        {
            // TODO : Définit la culture avec paramLang
        }
    }
}